{% extends 'base.html' %}

{% block content %}
<div class="container-fluid events-container">
    <div class="main-content">
    <!-- Детали встречи -->
    <div class="card mb-3">
        <div class="card-header" style="border-left: 5px solid {{ 'rgb(100, 92, 170)' }}">
            <div class="card-content">
            <h2 class="mb-3">{{ meeting.reason_to_meet }}</h2>
            </div>
        </div>
        <div class="card-body">
            <div class="row meeting-details">
                <div class="col-md-6 card-content">
                    <h4>Чем займёмся:</h4>
                    <p class="text-justify">{{ meeting.what_to_do }}</p>
                </div>
                <div class="col-md-6 card-content">
                    <h4>Место сбора:</h4>
                    <p class="text-justify">{{ meeting.meeting_place }}</p>
                </div>
                <div class="col-md-6 card-content">
                    <h4>Адрес:</h4>
                    <p class="text-justify">{{ meeting.address }}</p>
                </div>
                <div class="col-md-6 card-content">
                    <h4>Дресс-код:</h4>
                    <p class="text-justify">{{ meeting.dress_code}}</p>
                </div>
                <div class="col-md-6 card-content">
                    <h4>Когда собираемся:</h4>
                    <p class="text-justify">{{ meeting.date_meeting}}</p>
                </div>
                {% if meeting.link %}
                <div class="col-md-6 card-content">
                    <h4>Ссылка на место, мероприятие:</h4>
                    <h4><a href="{{ meeting.link }}">Тык сюда</a></h4>
                </div>
                {% endif %}
            </div>
            <div class="mt-3">
                <small class="text-muted">
                    Создано: {{ meeting.date_create|date:"d.m.Y" }} |
                    Автор: {{ meeting.author.username }}
                </small>
            </div>
        </div>
    </div>
</div>

    <!-- Комментарии -->
    <div class="comments-section">
        <div class="card">
            <div class="card-header">
                <h4 class="mb-2">Комментарии ({{ comments.count }})</h4>
            </div>
            <div class="card-body">
                <form method="post" class="comment-form">
                    {% csrf_token %}
                    {{ form.text }}
                    <button type="submit" class="btn btn-primary mt-2">Отправить</button>
                </form>

                <div class="comments-list">
                    {% for comment in comments %}
                    <div class="card mb-3 comment-card">
                        <div class="card-body py-2">
                            <p class="card-text mb-1">{{ comment.text }}</p>
                            <small class="text-muted">
                                {{ comment.author.username }} |
                                {{ comment.created_date|date:"d.m.Y H:i" }}
                            </small>
                        </div>
                    </div>
                    {% empty %}
                    <p>Пока нет комментариев</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}